# 程序打包说明（更新版）

## 重要更新

程序现在使用启动器（launcher.py）来启动Streamlit服务器，解决了直接运行exe无法启动的问题。

## 打包步骤

### 方法一：使用重新打包脚本（推荐）

1. 双击运行 `重新打包.bat`
2. 等待打包完成
3. 在 `dist` 目录中找到 `CutImage.exe`

### 方法二：使用命令行

```bash
# 清理之前的打包文件
rmdir /s /q build
rmdir /s /q dist

# 使用修复后的配置重新打包
pyinstaller build_fixed.spec
```

## 运行打包后的程序

1. 双击运行 `dist/CutImage.exe`
2. 程序会自动：
   - 启动Streamlit服务器
   - 等待3-5秒让服务器启动
   - 自动打开浏览器显示Web界面
3. 关闭程序：按 `Ctrl+C` 或关闭控制台窗口

## 工作原理

- **launcher.py**: 启动器脚本，负责启动Streamlit服务器并打开浏览器
- **app.py**: Streamlit应用主程序
- **cut_image.py**: 图片处理核心模块

打包后的exe文件包含所有这三个文件，启动器会自动调用Streamlit来运行app.py。

## 注意事项

1. **首次启动可能需要几秒钟**：等待Streamlit服务器启动
2. **控制台窗口**：会显示启动日志，不要关闭它
3. **浏览器**：程序会自动打开默认浏览器，如果没有自动打开，可以手动访问 `http://localhost:8501`
4. **端口占用**：如果8501端口被占用，程序可能会失败，请关闭占用该端口的程序

## 故障排除

### 问题1：程序启动但没有打开浏览器
- 手动访问：`http://localhost:8501`
- 检查防火墙是否阻止了连接

### 问题2：端口被占用
- 关闭其他使用8501端口的程序
- 或修改launcher.py中的端口号

### 问题3：程序无法启动
- 检查是否有杀毒软件阻止
- 查看控制台窗口的错误信息
- 确保所有依赖都已正确打包



